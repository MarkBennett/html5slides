<!DOCTYPE html>
<html>
<head>
  <title>Getting started with Mozilla's Add-on SDK</title>
  
  <meta charset='utf-8'>
  <script src="slides.js"></script>
  <base target="_blank"/> 
</head>
<body style='display: none'>

<section class='slides layout-regular template-default'>
<article>
  <h1>Getting started</h1>
  <h3>with Mozilla's Add-on SDK</h3>
  <p><em>FSOSS, October 29th 2011</em></p>
</article>

<article>
  <h1>Follow along</h1>
  <h3>This talk is a website!</h3>
  <h3><a href="http://talks.canuckistani.ca/jetpack-fsoss-2011/#2">http://talks.canuckistani.ca/jetpack-fsoss-2011/#2</a></h3>
  <h3>...and on <a href="https://github.com/canuckistani/html5slides/tree/jetpack-fsoss">github</a></h3>
</article>

<article>
<h3 id="a-brief-history">A Brief History</h3>

<ul>
  <li>The Jetpack project started in Mozilla Labs in 2009</li>
  <li>Goals:
    <ul>
      <li>No XUL / XBL.</li>
      <li>Make add-on development more like web development.</li>
      <li>Reduce maintenance burden on add-on developers.</li>
    </ul>
  </li>
</ul>
</article>
      
<article>
<h3 id="sdk-11">Current release: SDK 1.1</h3>
<ul>
  <li>1.0 Released June, 2011</li>
  <li>1.2.1 released Oct 19, 2011:
    <ul>
      <li>stabilization release</li>
      <li>Adds some functionality to existing APIs</li>
    </ul>
  </li>
</ul>
<h3>Next release: 1.3 on Nov. 29.</h3>
<ul>
  <li><em>Every 6 weeks</em>, 3 weeks before Firefox</li>
  <li>3 week period to allow for complications and add-on re-pack testing.</li>
</ul>
</article>

<article>
<h3 id="current-state">Current State</h3>

<ul>
  <li>Goal is to allow <em>very</em> easy implementation of simple add-ons</li>
  <li>Additional functionality can be implemented via modules</li>
  <li>SDK 1.x currently contains a useful but incomplete range of modules</li>
  <li>Obvious advantages:
    <ul>
      <li>Always restart-less</li>
      <li>high-level JavaScript APIs</li>
      <li>packaging tool</li>
      <li>integrated test framework</li>
      <li>extensibility via modules using CommonJS format.</li>
      <li>Future-proof!</li>
    </ul> 
  </li>
</ul>
</article>

<article>
  <h3>Roadmap</h3>
  <ul class="build">
    <li>Top priorities: 
      <ul class="build">
        <li>Localization</li>
        <li>Electrolysis</li>
        <li>Mobile</li>
      </ul>
    </li>
    <li>Secondary priorities:
      <ul class="build">
        <li>better support for existing add-on developers</li>
        <li>SDK simplification</li>
        <li>missing pieces: Prefs, Sidebar, Add-on Tab, Tab Groups</li>
        <li>more missing pieces: minimal / packed xpis, restart-less testing</li>
        <li>Hug the web harder.</li>
      </ul>
    </li>
  </ul>
<div class="build">
<p>Published roadmap:
<a href="https://wiki.mozilla.org/Jetpack/Roadmap">https://wiki.mozilla.org/Jetpack/Roadmap</a></p>  
</div>
</article>

<article>
  <h3>Who's using the SDK?</h3>
  <ul>
    <li>357 total SDK-based add-ons: [<a href="https://addons.mozilla.org/en-US/firefox/tag/jetpack">link</a>]</li>
    <li>26% of new add-ons are based on the SDK: [<a href="http://areweaddeduponyet.com/">link</a>]</li>
    <li>Most are relatively simple add-ons eg URL shorteners.</li>
    <li>1Password from Agilebits uses the SDK<br/><img src="images/1pass.jpg"/></li>
  </ul>
</article>

<article>
  <h3>Mozilla uses the SDK</h3>
  <p>Mozilla Labs projects currently using the SDK:</p>
  <ul>
    <li><a href="https://addons.mozilla.org/en-US/firefox/addon/firefox-share-alpha/?src=api">Firefox Share</a></li>
    <li><a href="https://apps.mozillalabs.com/">Open Web Apps</a></li>
    <li><a href="https://github.com/mozilla/deuxdrop">Deuxdrop</a></li>
  </ul>
  
  <p><em>Mozilla adds features to Firefox via add-ons, using the SDK</em></p>
  </ul>
</article>

<article>
<h1 id="lets-get-set-up">Let's Get set up!</h1>
</article>

<article>
<h3 id="local-development">Local development</h3>

<p>Requirements:</p>
  <ul>
    <li><a href="http://python.org/download/releases/2.7.2/">install Python</a> ( for Windows users )</li>
    <li>any reasonable text editor</li>
  </ul>
  
<p>Set-up</p>
  <ul>
    <li><a href="https://ftp.mozilla.org/pub/mozilla.org/labs/jetpack/jetpack-sdk-latest.zip">Download</a> the SDK and unzip, or</li>
    <li>Use the source: <a href="https://github.com/mozilla/addon-sdk">https://github.com/mozilla/addon-sdk</a></li>
    <li>In a console window:
      <ul id="inside-2">
        <li><code>cd /path/to/SDK</code></li>
        <li><code>source bin/activate</code></li>
      </ul>
    </li>
  </ul> 
</article>

<article>
<h3 id="online-developer-with-builder">Online development with Builder</h3>

<ul>
  <li>Requirements:
    <ul>
      <li>Firefox</li>
      <li>AMO account</li>
      <li>Builder 'helper' add-on</li>
    </ul>
  </li>
  <li>Benefits:
    <ul>
      <li>in-browser development</li>
      <li>create and share re-usable modules</li>
      <li>planned: publish to AMO</li>
    </ul>
  </li>
</ul>
</article>

<article>
<h1>Hacking with the SDK</h1>
</article>

<article>
  <h3>Style notes</h3>
  <p>Basic JS style similar in feel to Node.js</p>
  <ol style="margin: 8px 0">
    <li>require('some-module')</li>
    <li>create a new instance; pass in an options object</li>
    <li>Rock out!</li>
  </ol>
  <div>
    <p>Example:</p>
    <pre style="margin: 10px 0;">var someModule = require("some-module");
var instance = someModule.someClass({
  thisoption: 'my option',
  thatoption: 42,
  onSomeEvent: function(data) {},
});
instance.someMethod();</pre>
  </div>
</article>

<article>

<h3>Addon-kit Module overview</h3>

<ul>
  <li>Web content
    <ul>
      <li>windows, tabs, pag-mod</li>
    </ul>
  </li>
  <li>User interface &amp; interaction
    <ul>
      <li>widget, panel, selection, context-menu</li>
    </ul>
  </li>
  <li>OS integration
    <ul>
      <li>notifications, selection, clipboard, hotkeys</li>
    </ul>
  </li>
  <li>Services &amp; data:
    <ul>
      <li>request, simple-storage, page-worker</li>
    </ul>
  </li>
  <li>Utilities:
    <ul>
      <li>timers, passwords, private-browsing</li>
    </ul>
  </li>
</ul>  
</article>

<article>
  <h1>Code, plz kthxbai</h1>
  <img src="images/c0d3z.jpg"/> 
</article>

<article>
  <h3>Context Meu</h3>
      <pre style="margin: 10px 0;">
var cm = require("context-menu");
cm.Item({
  label: "Context Menu Test",
  context: cm.URLContext('http://aer.local:8080/fsoss*'),
  contentScript: 'self.on("click", function (node, data) {' +
                 '  alert("Click on context menu!"); ' +
                 '});',
  onMessage: function() {
    tabs.activeTab
  }
});
</pre>
</article>

<article>
  <h3>Widget</h3>
  <pre style="margin: 10px 0;">

require("widget").Widget({
    id: "mozilla-icon",
    label: "This is the widget demo!",
    contentURL: "http://www.mozilla.org/favicon.ico",
    panel: xPanel
});

var xPanel = require("panel").Panel({
    height: 340,
    width: 600,
    contentURL: 'http://www.reddit.com/r/programming/.compact'
});
</pre>
</article>

<article>
  <h3>Show a <a id="panelify" href="#14">Panel</a></h3>
<pre style="margin: 10px 0;">
var xPanel = require("panel").Panel({
    height: 340,
    width: 600,
    contentURL: 'http://www.reddit.com/r/programming/.compact'
});

/* pop up the panel */
worker.port.on('panelify', function(m) {
  xPanel.show();
});
</pre>
</article>

<article>
<h3>Make a <a id="requestify" href="#14">Web Request</a></h3>
<pre style="margin: 10px 0;">
var shorten = function(url, callback) {    
    let requestJSON = JSON.stringify({longUrl: url});
    let googlRequest = require("request").Request({
        url: 'https://www.googleapis.com/urlshortener/v1/url',
        content: requestJSON,
        contentType: 'application/json',
        onComplete: function(response) {
          callback(response.json);
        }
    });
    googlRequest.post();
}
</pre>
</article>

<article>
  <h3>Show a <a id="notify" href="#14">Notification</a></h3>
<pre style="margin: 10px 0;">
    worker.port.on('notify', function(m) {
      require("notifications").notify({
        title:  "hello from Growl!",
        text:   "of course, you need Growl installed for this to work...",
        iconUrl: "http://www.mozilla.org/favicon.ico"
      });
    });
  </pre>
</article>

<article>
  <h1>Q&A</h1>
</article>

<article>
  <h1>Rocketeers!!</h1>
  <ul>
    <li>IRC: #jetpack on irc.mozilla.org</li>
    <li><a href="http://groups.google.com/group/mozilla-labs-jetpack">Google Group</a></li>
    <li><a href="https://wiki.mozilla.org/Jetpack#Weekly_Meeting">Weekly project meetings</a></li>
    <li><a href="http://feeds.feedburner.com/planet-jetpack">Subscribe to Planet Jetpack</a></li>
    <li>Mozilla BOF, Saturday afternoon, $PUT_TIME_HERE_DUMMY</li>
  </ul>
</article>
</body>
</html>
